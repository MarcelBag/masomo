{% extends "base.html" %}
{% load static %}

{% block title %}Edit Attendance{% endblock %}
{% block header_title %}Edit Attendance{% endblock %}

{% block content %}
<section class="attendance-edit-container">
  <form method="post" class="attendance-edit-form">
    {% csrf_token %}
    {{ form.non_field_errors }}

    <div>
      {{ form.student.label_tag }}<br>
      {{ form.student }}{{ form.student.errors }}
    </div>
    <div>
      {{ form.date.label_tag }}<br>
      {{ form.date }}{{ form.date.errors }}
    </div>
    <div>
      {{ form.status.label_tag }}<br>
      {{ form.status }}{{ form.status.errors }}
    </div>
    <div>
      {{ form.marked_by.label_tag }}<br>
      {{ form.marked_by }}{{ form.marked_by.errors }}
    </div>

    <button type="submit" class="btn-primary">Save</button>
    <a href="{% url 'attendance:attendance_overview' %}" class="btn-link">Cancel</a>
  </form>
</section>

{{ form.media }}

<!-- Flatpickr for the date -->
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    flatpickr("input[name='date']", {
      altFormat: "F j, Y",
      allowInput: true
    });
  });
</script>
{% endblock %}
